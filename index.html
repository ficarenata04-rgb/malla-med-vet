<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Medicina Veterinaria UC</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body{
  font-family:'Poppins',sans-serif;
  background:linear-gradient(135deg,#fde4ff,#e0f7fa);
  margin:0;
  padding:20px;
}

h1{
  text-align:center;
  color:#6a1b9a;
  margin-bottom:30px;
}

.malla{
  display:grid;
  grid-template-columns:repeat(6,1fr);
  gap:20px;
}

.anio{
  background:#ffffffcc;
  border-radius:18px;
  padding:14px;
}

.anio h2{
  text-align:center;
  color:#8e24aa;
  font-size:18px;
  margin-bottom:10px;
}

.semestre{
  background:#f3e5f5;
  border-radius:14px;
  padding:10px;
  margin-bottom:12px;
}

.semestre h3{
  font-size:14px;
  color:#00838f;
  margin-bottom:8px;
  text-align:center;
}

.ramo{
  background:#ede7f6;
  border-radius:10px;
  padding:8px;
  margin-bottom:6px;
  font-size:12px;
  cursor:pointer;
  transition:0.2s;
  position:relative;
}

.ramo:hover{transform:scale(1.03);}

.ramo.aprobado{
  background:#c8e6c9;
  text-decoration:line-through;
}

.ramo.bloqueado{
  background:#eeeeee;
  color:#888;
  cursor:not-allowed;
}

.tooltip{
  display:none;
  position:absolute;
  bottom:110%;
  left:50%;
  transform:translateX(-50%);
  background:#6a1b9a;
  color:white;
  padding:6px;
  border-radius:8px;
  font-size:11px;
  width:180px;
  z-index:10;
}

.ramo.bloqueado:hover .tooltip{
  display:block;
}
</style>
</head>

<body>
<h1>Malla Interactiva – Medicina Veterinaria UC</h1>

<div class="malla" id="malla"></div>

<script>
const data = [
{
  anio:"Primer Año",
  semestres:[
    {nombre:"Semestre 1", ramos:[
      ["VET0010","Introducción a la Medicina Veterinaria",[]],
      ["QUIM201M","Química",[]],
      ["MAT1023","Cálculo",[]],
      ["FIS119V","Física Biomédica",[]],
      ["FIL2001","Filosofía",[]],
      ["VET0140","Biología y Diversidad Animal",[]]
    ]},
    {nombre:"Semestre 2", ramos:[
      ["VET0110","Anatomía Vet. I",["VET0140"]],
      ["BIO239M","Biología Molecular",["QUIM201M"]],
      ["VET0100","Histología y Embriología",[]],
      ["VET0130","Bioestadística",["MAT1023"]],
      ["VET0020","Ética Veterinaria",[]],
      ["ELECTIVO","Electivo Formación General",[]]
    ]}
  ]
},
{
  anio:"Segundo Año",
  semestres:[
    {nombre:"Semestre 3", ramos:[
      ["VET0120","Anatomía Vet. II",["VET0110"]],
      ["VET1100","Fisiología Animal",["BIO239M","VET0100","FIS119V"]],
      ["VET1400","Ecología Veterinaria",["VET0140"]],
      ["VET0500","Etología y Bienestar Animal",["VET0140"]],
      ["ELECTIVO","Electivo Formación General",[]]
    ]},
    {nombre:"Semestre 4", ramos:[
      ["VET1110","Microbiología e Inmunología",["BIO239M"]],
      ["VET1130","Fisiopatología",["VET1100"]],
      ["VET1120","Genética y Evolución",["BIO239M","VET0130"]],
      ["VET0510","Manejo Animal",["VET0500","VET0120","VET0020"]],
      ["ELECTIVO","Electivo Formación General",[]],
      ["ELECTIVO2","Electivo Formación General",[]]
    ]}
  ]
}
];

const aprobados = JSON.parse(localStorage.getItem("aprobados")||"[]");

function crearRamo([cod,nombre,req]){
  const d=document.createElement("div");
  d.className="ramo";
  d.innerHTML=`<strong>${nombre}</strong><br>${cod}`;
  const faltan=req.filter(r=>!aprobados.includes(r));

  if(req.length && faltan.length){
    d.classList.add("bloqueado");
    const t=document.createElement("div");
    t.className="tooltip";
    t.innerText="Falta aprobar: "+faltan.join(", ");
    d.appendChild(t);
  }else{
    if(aprobados.includes(cod)) d.classList.add("aprobado");
    d.onclick=()=>{
      if(aprobados.includes(cod))
        aprobados.splice(aprobados.indexOf(cod),1);
      else aprobados.push(cod);
      localStorage.setItem("aprobados",JSON.stringify(aprobados));
      location.reload();
    }
  }
  return d;
}

const cont=document.getElementById("malla");

data.forEach(a=>{
  const anio=document.createElement("div");
  anio.className="anio";
  anio.innerHTML=`<h2>${a.anio}</h2>`;
  a.semestres.forEach(s=>{
    const sem=document.createElement("div");
    sem.className="semestre";
    sem.innerHTML=`<h3>${s.nombre}</h3>`;
    s.ramos.forEach(r=>sem.appendChild(crearRamo(r)));
    anio.appendChild(sem);
  });
  cont.appendChild(anio);
});
</script>

</body>
</html>
